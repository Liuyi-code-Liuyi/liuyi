# Python 编程笔记

## Pandas 基础课程

Pandas 是 Python 中用于数据分析和操作的强大库，基于 NumPy 构建，提供高效的数据结构和丰富功能。以下介绍 Pandas 的基本用法，包括安装与导入、数据结构、查看与属性、索引与选择、数据操作与清洗、数据合并、统计与分组、CSV 文件操作、过滤与排序。

### 1. 安装和导入 Pandas

- 通过 pip 安装 Pandas。
- 以 pd 别名导入 Pandas，通常同时导入 NumPy 以处理底层数组操作。
- Pandas 的核心数据结构是一维的 Series 和二维的 DataFrame。

### 2. Pandas 数据结构：Series 和 DataFrame

- Series 是一维数据结构，类似带索引的数组。
- DataFrame 是二维表格结构，每列是一个 Series。
- 示例：创建 Series，指定索引为字母；从字典创建 DataFrame，包含姓名、年龄和城市；从 NumPy 数组创建 DataFrame，指定列名和索引。

### 3. 数据查看与基本属性

- 查看 DataFrame 的前几行、基本信息、统计摘要、列名和索引。
- 示例：显示 DataFrame 的前两行，查看列名、非空值计数和数据类型，计算数值列的均值、标准差等统计信息，显示列名和索引范围。

### 4. 索引与选择数据

- 使用列名、loc（基于标签）、iloc（基于整数位置）或切片选择数据。
- 示例：选择单列返回 Series，选择多列返回 DataFrame；使用 loc 提取某行数据，iloc 访问特定位置元素，切片提取前两行特定列。

### 5. 数据操作与清洗

- 添加新列、删除列、处理缺失值（填充或删除）。
- 示例：添加薪资列，删除城市列；用固定值或均值填充缺失值，删除含缺失值的行。

### 6. 数据合并

- 使用 merge 按指定列合并 DataFrame，支持内连接、左连接等。
- 使用 concat 沿指定轴拼接 DataFrame。
- 示例：按 ID 列内连接两个 DataFrame，垂直拼接两个 DataFrame 并重置索引。

### 7. 基本统计与分组

- 计算列的均值、最大值等统计量。
- 按指定列分组，计算每组的统计值。
- 示例：计算年龄均值和薪资最大值，按年龄分组计算薪资均值。

### 8. 读取和写入 CSV 文件

- 将 DataFrame 写入 CSV 文件，或从 CSV 文件读取数据。
- 支持指定列读取、处理缺失值。
- 示例：将 DataFrame 写入 CSV 文件，读取全部或部分列，处理含缺失值的 CSV 文件。

### 9. 数据过滤与排序

- 使用条件过滤行，支持多条件组合。
- 按单列或多列排序，支持升序或降序。
- 示例：过滤年龄大于 30 的行，年龄大于 25 且薪资小于 80000 的行；按薪资降序排序，按年龄升序和薪资降序排序。

---

## NumPy 基础课程

NumPy 是 Python 中用于科学计算的核心库，提供高效的多维数组操作和数学函数。以下介绍 NumPy 的基本用法，包括数组创建、属性、索引、运算、数学函数、重塑、广播、随机数、线性代数、布尔索引、拼接与分割、性能优化、排序与唯一值。

### 1. 安装和导入 NumPy

- 通过 pip 安装 NumPy。
- 在 Python 中以 np 别名导入 NumPy。
- NumPy 的核心对象是多维数组，支持高效计算。

### 2. 创建 NumPy 数组

- 使用列表创建一维或二维数组。
- 创建全零或全一数组，指定形状。
- 创建等间隔数组，从起始值到终止值（不包含），指定步长。
- 创建均匀分布数组，从起始值到终止值（包含），指定点数。

### 3. 数组属性

- 查看数组的形状（行数和列数）、维度数、元素总数和数据类型。
- 示例：创建 2 行 3 列数组，显示形状为 (2, 3)，维度为 2，元素总数为 6，数据类型为整数。

### 4. 数组索引和切片

- 使用行和列索引访问单个元素。
- 使用冒号提取整行或整列。
- 使用切片提取子数组，指定起始、终止和步长。
- 示例：从 3 行 3 列数组中提取第一行、第二列或前两行前两列的子数组。

### 5. 数组运算

- 支持逐元素加法和乘法，无需循环。
- 计算向量点积或矩阵乘法。
- 示例：两个一维数组逐元素相加和相乘，计算点积；二维矩阵与向量进行矩阵乘法。

### 6. 常用数学函数

- 计算数组元素的平方根、均值、标准差和总和。
- 示例：对一维数组计算平方根，得到新数组；计算均值、标准差和总和。

### 7. 数组重塑

- 将数组重塑为新形状，保持元素总数不变。
- 将多维数组展平为一维数组。
- 示例：将一维数组重塑为 2 行 3 列，展平后恢复为一维。

### 8. 数组广播

- 广播机制允许不同形状的数组运算，自动扩展较小数组。
- 示例：一维数组与标量相乘，二维数组与一维数组相加，列向量与行向量相加。

### 9. 随机数生成

- 设置随机种子确保结果可重复。
- 生成均匀分布随机数、正态分布随机数或随机整数。
- 随机打乱数组元素。
- 示例：生成 2 行 3 列的均匀分布随机数，随机整数数组，随机打乱一维数组。

### 10. 线性代数操作

- 执行矩阵乘法、转置、计算行列式和矩阵逆。
- 求解线性方程组。
- 示例：对 2 行 2 列矩阵计算乘法、转置、行列式和逆，求解线性方程组。

### 11. 布尔索引和条件筛选

- 使用条件生成布尔数组，筛选符合条件的元素。
- 结合条件修改数组元素。
- 支持多条件筛选。
- 示例：从一维数组筛选大于 20 的元素，将小于 20 的元素设为 0，筛选大于 15 且小于 30 的元素。

### 12. 数组拼接与分割

- 沿垂直轴或水平轴拼接数组。
- 沿指定轴分割数组为多份。
- 示例：垂直拼接两个 2 行 2 列数组，水平拼接，分割 2 行 4 列数组为两份。

### 13. 性能优化技巧

- 使用向量化运算替代 Python 循环，提高效率。
- 示例：对大数组执行乘 2 操作，向量化运算比循环快得多。

### 14. 排序与唯一值

- 对数组排序，返回排序后的数组。
- 获取排序索引或唯一值。
- 示例：对一维数组排序，获取排序索引，提取唯一值。

---

## 作业 1：NumPy 数组基本操作

### 任务描述

- 创建一个 3 行 4 列的二维数组，元素为 1 到 12 的整数。
- 完成以下任务：
  - 显示数组的形状、维度和数据类型。
  - 将数组元素乘以 2，显示结果。
  - 将数组重塑为 4 行 3 列，显示新数组。

### 示例说明

- 使用 NumPy 库创建 3 行 4 列数组，元素从 1 到 12。
- 任务 1：显示数组形状（3, 4）、维度（2）和数据类型（通常为整数）。
- 任务 2：将每个元素乘以 2，显示结果。
- 任务 3：重塑数组为 4 行 3 列，元素按行优先排列，显示新数组。

---

## 作业 2：数组索引与切片

### 任务描述

- 给定一个 4 行 4 列的数组，元素为 1 到 16。
- 完成以下任务：
  - 提取第 2 行所有元素。
  - 提取第 3 列所有元素。
  - 提取子数组（包含第 1、2 行和第 2、3 列）。
  - 将大于 10 的元素替换为 0，display修改后的数组。

### 示例说明

- 创建 4 行 4 列数组，元素从 1 到 16。
- 任务 1：提取第 2 行（索引 1）的所有元素。
- 任务 2：提取第 3 列（索引 2）的所有元素。
- 任务 3：提取第 1、2 行和第 2、3 列的子数组。
- 任务 4：将数组中大于 10 的元素设为 0，显示结果。

---

## 作业 3：数组运算与广播

### 任务描述

- 创建两个数组：
  - 数组 A：3 行 2 列的二维数组，元素为 1 到 6。
  - 数组 B：一维数组，包含元素 10 和 20。
- 完成以下任务：
  - 计算 A 和 B 的逐元素相加（利用广播）。
  - 计算 A 和 B 的逐元素相乘（利用广播）。
  - 计算 A 的每一行与 B 的点积。

### 示例说明

- 创建数组 A 为 3 行 2 列，元素为 1 到 6；数组 B 为包含 10 和 20 的一维数组。
- 任务 1：通过广播机制，将 A 和 B 逐元素相加，显示结果。
- 任务 2：通过广播机制，将 A 和 B 逐元素相乘，显示结果。
- 任务 3：计算 A 每行与 B 的点积，生成一维数组，显示结果。

---

## 六、面向对象编程基础

### 6.1 类与对象

- **类定义**：使用 class 关键字定义类。
- **对象创建**：通过类名创建对象。
- **示例**：定义一个 Animal 类，包含名称属性和发声方法，创建 bird 对象并调用发声方法。

### 6.2 属性与方法

- **实例属性**：在初始化方法中通过 self 定义属性。
- **实例方法**：包含 self 参数，表示对象本身。

### 6.3 继承

- **定义**：子类通过括号继承父类，复用父类属性和方法。
- **作用**：子类可重写或扩展父类功能。

### 6.4 多态

- **定义**：不同子类对同一方法提供不同实现。
- **示例**：Dog 和 Cat 类继承 Animal 类，各自的发声方法返回“汪汪汪”和“喵喵喵”，创建 Dog 和 Cat 对象，调用发声方法显示不同结果。

### 练习题

- **定义 Car 类**：
  - 属性：品牌和速度。
  - 方法：加速（每次增加 10），刹车（每次减少 10，不低于 0）。
- **创建 Car 实例**：调用加速和刹车方法，显示当前速度。
- **定义 ElectricCar 子类**：
  - 继承 Car，新增电量属性。
  - 方法：充电（增加 20 电量，不超过 100）。

### 示例说明

- 定义 Car 类，包含品牌和速度属性，加速方法增加速度，刹车方法减少速度。
- 创建 Toyota 实例，加速 3 次，刹车 2 次，显示速度。
- 定义 ElectricCar 子类，新增电量属性，充电方法增加电量，创建 Tesla 实例，充电后显示电量。

---

## 七、文件操作与异常处理

### 7.1 文件操作流程

- **打开文件**：使用 open 函数，模式包括：
  - `r`：读（默认）
  - `w`：写（覆盖）
  - `a`：追加
- **读取**：read() 读取全部，readline() 读取单行，readlines() 读取所有行列表。
- **写入**：write() 写入字符串，writelines() 写入列表。
- **关闭**：使用 close() 或 with 语句自动关闭。
- **示例**：写入文件 test.txt，内容为 “Hello, World!” 和 “这是第二行。”，读取并逐行显示。

### 7.2 异常处理

- **结构**：try-except-finally 块。
- **捕获特定异常**：except 后跟异常类型，如 ValueError。
- **抛出异常**：使用 raise 抛出异常。
- **示例**：输入整数，除以 100，捕获 ValueError（非整数输入）和 ZeroDivisionError（除数为 0），finally 显示完成。

### 7.3 文件与异常结合

- **示例**：尝试读取 test.txt，若文件不存在，显示提示并创建新文件，写入内容。

---

## 八、模块与标准库

### 8.1 常用内置模块

- **math 模块**：提供数学函数，如 pi、sqrt、sin。
- **random 模块**：提供随机数生成，如 random()、randint()、choice()。
- **time 和 datetime 模块**：time.time() 获取时间戳，datetime.now() 获取当前时间，sleep() 暂停执行。

### 8.2 文件与目录操作（os 模块）

- **常用功能**：获取当前目录（getcwd()），列出目录内容（listdir()），创建目录（mkdir()），拼接路径（path.join()）。

---

## 附、列表和字符串的切片操作

### 1. 切片操作语法

- **语法**：序列[start:end:step]，start 为起始索引，end 为结束索引（不包含），step 为步长。
- **特点**：列表切片返回新列表，原列表不变；字符串切片返回新字符串，原字符串不可变。

### 2. 核心特性

- **基础切片**：

| 场景 | 示例（`a = [0,1,2,3,4,5]`） | 结果 |
|------|--------------------------|------|
| 从开头到 end-1 | `a[2:5]` | `[2, 3, 4]` |
| 从 start 到末尾 | `a[3:]` | `[3, 4, 5]` |
| 从开头到 end-1（反向） | `a[:-2]` | `[0, 1, 2, 3]` |
| 全切片（复制） | `a[:]` | `[0, 1, 2, 3, 4, 5]` |

- **步长与反向切片**：正步长从左到右，负步长从右到左。
- **用法**：提取子序列、反转序列、间隔选取。

### 3. 练习题

- **提取邮箱用户名**：从邮箱地址（如 “user_name@example.com”）提取用户名。
- **反转列表并间隔取值**：反转列表 [1, 2, 3, 4, 5, 6, 7, 8, 9]，提取反转后索引 0、2、4 的元素。
- **处理字符串中的数字**：从 “a1b2c3d4e5” 提取数字，组成 “12345”。

### 示例说明

- 提取邮箱用户名：从 “user_name@example.com” 中提取 “user_name”。
- 反转列表：将 [1, 2, 3, 4, 5, 6, 7, 8, 9] 反转为 [9, 8, 7, 6, 5, 4, 3, 2, 1]，提取索引 0、2、4 的元素为 [9, 7, 5]。
- 处理字符串：从 “a1b2c3d4e5” 中提取数字字符，组成 “12345”。